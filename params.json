{"name":"Estrela","tagline":"Lua web framework for nginx","body":"estrela\r\n=======\r\n\r\nLua framework for nginx or cli (in early stage of development)\r\n\r\n### In a nutshell\r\n\r\n**nginx.conf**\r\n```nginx\r\nhttp {\r\n    lua_package_path '/path/to/lua/?.lua;/path/to/lua/lib/?.lua;;';\r\n\r\n    server {\r\n        location / {\r\n            content_by_lua_file /path/to/lua/index.lua;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**index.lua**\r\n```lua\r\nrequire('bootstrap'):serve()\r\n```\r\n\r\n**bootstrap.lua**\r\n```lua\r\nlocal PP = require('estrela.io.pprint').print\r\n\r\nreturn require('estrela.web').App {\r\n    [''] = function()\r\n        print 'Hello world'\r\n        print 'POST'\r\n        PP(app.req.POST)\r\n        print 'FILES'\r\n        PP(app.req.FILES)\r\n    end,\r\n\r\n    ['/admin/:action/do$'] = function(app)\r\n        print('admin do ', app.route.params.action, '<br/>')\r\n    end,\r\n\r\n    [{account = '/:name$', profile = '/profile/:name$'}] = function(app)\r\n        local url = app.router:urlFor(app.route.name, app.route.params)\r\n        print('Hello from ', app.req.method, ' ', url)\r\n    end,\r\n\r\n    ['/fail$'] = function()\r\n        -- рушим скрипт, вызывая необъявленную функцию\r\n        -- бросается 500 ошибка, которая вызывает переход к соответствующему обработчику\r\n        fooBar()\r\n    end,\r\n\r\n    [404] = function()\r\n        print 'Route is not found'\r\n    end,\r\n\r\n    [500] = function(app)\r\n        print('Ooops: ', app.error, ' on ', app.req.url)\r\n    end,\r\n}\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}